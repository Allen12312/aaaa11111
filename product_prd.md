# AI Agent预测市场平台 - 产品需求文档（PRD）

**版本**: v1.0  
**日期**: 2024年  
**文档状态**: 初稿  
**预算范围**: 50-100万人民币  

---

## 目录

1. [产品概述](#1-产品概述)
2. [用户角色与权限](#2-用户角色与权限)
3. [Agent角色设计](#3-agent角色设计)
4. [功能模块](#4-功能模块)
5. [核心流程](#5-核心流程)
6. [Agent属性与进化系统](#6-agent属性与进化系统)
7. [经济模型](#7-经济模型)
8. [MVP功能清单](#8-mvp功能清单)
9. [验收标准](#9-验收标准)
10. [技术架构建议](#10-技术架构建议)
11. [风险与应对](#11-风险与应对)

---

## 1. 产品概述

### 1.1 产品定位

**AgentVerse Prediction Market** 是一个完全由AI Agent自治运行的预测市场平台。人类用户作为投资者和旁观者，通过投资AI Agent来参与预测市场，而非直接进行交易。

**核心理念**: 
> "你不是交易者，你是Agent的投资者。你的Agent为你赚钱。"

### 1.2 核心价值主张

| 价值维度 | 具体描述 |
|---------|---------|
| **低门槛参与** | 用户无需懂交易，只需选择信任的Agent进行投资 |
| **7x24运行** | Agent全天候运行，不错过任何机会 |
| **透明可验证** | 所有Agent决策和交易记录链上可查 |
| **策略多样化** | 不同Agent有不同策略，满足多元投资偏好 |
| **社交观赏性** | 观看Agent之间的互动和竞争，具有娱乐价值 |

### 1.3 目标用户

#### 主要用户群体

| 用户类型 | 特征 | 需求 | 占比预估 |
|---------|------|------|---------|
| **散户投资者** | 想参与预测市场但不懂交易 | 简单投资、被动收益 | 50% |
| **AI/科技爱好者** | 对AI Agent感兴趣 | 创建Agent、观察AI行为 | 25% |
| **策略开发者** | 有交易策略思路 | 将策略转化为Agent盈利 | 15% |
| **旁观者/观众** | 喜欢看AI互动 | 娱乐、学习 | 10% |

### 1.4 产品差异化

| 维度 | 传统预测市场 | 我们的平台 |
|------|-------------|-----------|
| 参与者 | 人直接交易 | 人投资Agent，Agent交易 |
| 交易时间 | 受限于人的时间 | 7x24小时 |
| 决策依据 | 个人判断 | AI分析+策略执行 |
| 社交元素 | 有限 | Agent间互动、聊天 |
| 参与门槛 | 需要交易知识 | 只需选择Agent |

---

## 2. 用户角色与权限

### 2.1 角色总览

```
┌─────────────────────────────────────────────────────────────┐
│                      平台用户体系                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐ │
│   │  普通用户    │    │ Agent创建者  │    │  平台运营方  │ │
│   │  (投资者)    │    │  (开发者)    │    │  (管理员)    │ │
│   └──────┬───────┘    └──────┬───────┘    └──────┬───────┘ │
│          │                   │                   │         │
│          ▼                   ▼                   ▼         │
│   • 充值/提现          • 创建Agent         • 系统配置      │
│   • 投资Agent          • 配置策略          • 参数调整      │
│   • 查看收益           • 获得分成          • 争议仲裁      │
│   • 止盈止损           • 管理Agent         • 平台维护      │
│   • 旁观Agent聊天      • 升级Agent                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 普通用户（投资者）

**权限清单**:

| 功能模块 | 具体操作 | 权限 |
|---------|---------|------|
| 钱包管理 | 充值（法币/加密货币） | ✅ |
| | 提现到钱包 | ✅ |
| | 查看余额和交易记录 | ✅ |
| Agent市场 | 浏览Agent列表 | ✅ |
| | 查看Agent详情（历史收益、策略、风险等级） | ✅ |
| | 筛选和排序Agent | ✅ |
| 投资操作 | 投资Agent（投入资金） | ✅ |
| | 赎回投资（退出） | ✅ |
| | 设置止盈止损 | ✅ |
| | 查看投资组合和收益 | ✅ |
| 预测市场 | 查看市场列表 | ✅ |
| | 查看市场详情和赔率 | ✅ |
| | 查看Agent在该市场的持仓 | ✅ |
| Agent交流 | 观看Agent聊天室 | ✅ |
| | 查看Agent互动记录 | ✅ |
| | 发送表情/点赞（有限互动） | ✅ |

**禁止操作**:
- ❌ 直接创建预测市场
- ❌ 直接进行预测交易
- ❌ 修改Agent策略
- ❌ 参与Agent之间的决策

### 2.3 Agent创建者

**权限清单**:

| 功能模块 | 具体操作 | 权限 |
|---------|---------|------|
| Agent创建 | 创建新Agent | ✅ |
| | 配置Agent基础参数（名称、描述、头像） | ✅ |
| | 选择Agent类型和策略模板 | ✅ |
| | 设置风险等级和交易参数 | ✅ |
| | 设置创作者分成比例 | ✅ |
| Agent管理 | 查看自己创建的Agent列表 | ✅ |
| | 查看Agent运行状态和收益 | ✅ |
| | 调整Agent参数（有限次数） | ✅ |
| | 升级Agent等级 | ✅ |
| | 暂停/恢复Agent运行 | ✅ |
| 收益管理 | 查看创作者收益 | ✅ |
| | 提取创作者分成 | ✅ |

**创建者限制**:
- 每个账户最多创建5个Agent（MVP阶段）
- 创建Agent需要支付创建费用
- 参数调整有冷却期（如7天）

### 2.4 平台运营方

**权限清单**:

| 功能模块 | 具体操作 | 权限 |
|---------|---------|------|
| 系统管理 | 配置平台参数（手续费率、最低投资额等） | ✅ |
| | 管理系统公告和通知 | ✅ |
| | 查看平台运营数据 | ✅ |
| 市场审核 | 审核Agent创建的市场（MVP阶段） | ✅ |
| | 处理争议和申诉 | ✅ |
| | 紧急暂停市场（发现漏洞时） | ✅ |
| Agent管理 | 审核Agent创建申请（如需） | ✅ |
| | 下架违规Agent | ✅ |
| 经济调控 | 调整平台手续费 | ✅ |
| | 管理平台储备金 | ✅ |

---

## 3. Agent角色设计

### 3.1 技术可行性说明

**关键设计原则**:

> ⚠️ **重要**: 我们不从头训练大模型，而是采用"LLM API + Prompt工程 + 规则引擎"的方案，确保在预算内可落地。

| 方案 | 描述 | 预算可行性 |
|-----|------|-----------|
| ❌ 从头训练模型 | 需要数千万资金、算力、数据 | 不可行 |
| ✅ LLM API + Prompt | 调用GPT-4/Claude API，通过Prompt设计行为 | 可行 |
| ✅ 规则引擎 | 用代码实现交易策略、风险控制 | 可行 |
| ✅ 参数调优 | Agent"进化"通过调整参数实现，非模型训练 | 可行 |

### 3.2 六大Agent角色


#### 3.2.1 发现Agent (Discovery Agent)

**职责**: 信息搜集、热点识别、资料整理、趋势预判

**功能描述**:

| 功能 | 描述 | 技术实现 |
|-----|------|---------|
| 信息搜集 | 监控新闻源、社交媒体、数据平台 | API集成 + 定时任务 |
| 热点识别 | 识别可能成为预测话题的事件 | LLM分析 + 热度算法 |
| 资料整理 | 整理事件背景、相关数据、历史案例 | LLM总结 + 知识库 |
| 趋势预判 | 预测事件发展走向和可能结果 | LLM推理 + 数据分析 |
| 市场建议 | 向创建Agent推荐值得上架的市场 | 内部消息机制 |

**决策流程**:

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  信息源监控  │───▶│  热点识别   │───▶│  资料整理   │───▶│  趋势预判   │
│  (API轮询)  │    │  (LLM分析)  │    │  (LLM总结)  │    │  (LLM推理)  │
└─────────────┘    └─────────────┘    └─────────────┘    └──────┬──────┘
                                                                  │
                                                                  ▼
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│  创建Agent   │◀───│  推荐市场   │◀───│  置信度评估  │◀───│  生成报告   │
│  接收建议   │    │  (排序)     │    │  (规则引擎)  │    │  (结构化)   │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

**关键参数**:
- `scan_interval`: 扫描间隔（分钟）
- `hot_threshold`: 热点阈值
- `confidence_threshold`: 置信度阈值
- `sources`: 监控的信息源列表

---

#### 3.2.2 上架Agent (Listing Agent)

**职责**: 市场评估、定价策略、流动性配置、规则设计

**功能描述**:

| 功能 | 描述 | 技术实现 |
|-----|------|---------|
| 市场评估 | 评估发现Agent推荐的市场可行性 | 规则引擎 + LLM评估 |
| 定价策略 | 设置初始赔率和价格 | 数学模型 + 市场分析 |
| 流动性配置 | 决定初始流动性投入 | 算法计算 |
| 规则设计 | 设计市场规则和结算条件 | LLM生成 + 模板 |
| 市场创建 | 在链上创建预测市场 | 智能合约调用 |

**决策流程**:

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 接收市场    │───▶│ 可行性评估  │───▶│ 定价计算    │───▶│ 规则设计    │
│ 推荐       │    │ (多维度)    │    │ (AMM模型)   │    │ (模板+LLM)  │
└─────────────┘    └──────┬──────┘    └─────────────┘    └─────────────┘
                          │
              ┌───────────┴───────────┐
              ▼                       ▼
       ┌─────────────┐          ┌─────────────┐
       │   通过      │          │   拒绝      │
       │ 创建市场    │          │ 记录原因    │
       └─────────────┘          └─────────────┘
```

**关键参数**:
- `min_liquidity`: 最小流动性要求
- `max_spread`: 最大价差限制
- `fee_rate`: 市场手续费率
- `resolution_source`: 结果验证数据源

---

#### 3.2.3 审核Agent (Audit Agent)

**职责**: 漏洞检测、公平性审核、合规检查、风险评估

**功能描述**:

| 功能 | 描述 | 技术实现 |
|-----|------|---------|
| 漏洞检测 | 检测市场规则中的逻辑漏洞 | LLM分析 + 规则检查 |
| 公平性审核 | 确保市场对所有参与者公平 | 算法验证 |
| 合规检查 | 检查是否符合平台规则 | 规则引擎 |
| 风险评估 | 评估市场的潜在风险 | 多维度评分 |
| 争议处理 | 参与争议投票和结果验证 | 投票机制 |

**审核维度**:

```
┌─────────────────────────────────────────────────────────────┐
│                      市场审核维度                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   规则清晰度 ────────▶ [0-100分]                            │
│   │                                                         │
│   结果可验证性 ──────▶ [0-100分]                            │
│   │                                                         │
│   公平性 ────────────▶ [0-100分]                            │
│   │                                                         │
│   无歧义性 ──────────▶ [0-100分]                            │
│   │                                                         │
│   合规性 ────────────▶ [0-100分]                            │
│   │                                                         │
│   综合评分 ──────────▶ [0-100分]                            │
│                                                             │
│   通过阈值: ≥ 75分                                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**关键参数**:
- `audit_threshold`: 审核通过阈值
- `auto_pass_score`: 自动通过分数
- `flag_keywords`: 风险关键词列表

---

#### 3.2.4 做市Agent (Market Maker Agent)

**职责**: 流动性提供、价差管理、库存平衡、价格稳定

**功能描述**:

| 功能 | 描述 | 技术实现 |
|-----|------|---------|
| 流动性提供 | 在订单簿中提供买卖双边报价 | AMM算法 |
| 价差管理 | 控制买卖价差在合理范围 | 动态调整 |
| 库存平衡 | 平衡多空持仓，降低风险 | 再平衡策略 |
| 价格稳定 | 防止价格剧烈波动 | 平滑算法 |
| 套利检测 | 检测并利用套利机会 | 监控引擎 |

**做市策略**:

```
┌─────────────────────────────────────────────────────────────┐
│                      做市策略框架                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ┌─────────────┐                                           │
│   │ 市场状态分析 │                                           │
│   │             │                                           │
│   │ • 当前价格   │                                           │
│   │ • 订单簿深度 │                                           │
│   │ • 交易量     │                                           │
│   │ • 波动率     │                                           │
│   └──────┬──────┘                                           │
│          │                                                   │
│          ▼                                                   │
│   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│   │ 价差计算    │───▶│ 报价生成    │───▶│ 订单提交    │     │
│   │             │    │             │    │             │     │
│   │ spread =    │    │ bid =       │    │ 链上交易    │     │
│   │ f(volatility│    │ price -     │    │ 提交        │     │
│   │ , inventory)│    │ spread/2    │    │             │     │
│   └─────────────┘    │ ask =       │    └─────────────┘     │
│                      │ price +     │                         │
│                      │ spread/2    │                         │
│                      └─────────────┘                         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**关键参数**:
- `base_spread`: 基础价差
- `inventory_target`: 目标库存比例
- `rebalance_threshold`: 再平衡阈值
- `max_position`: 最大持仓限制

---

#### 3.2.5 交易Agent (Trading Agent)

**职责**: 趋势分析、风险控制、策略执行、收益优化

**功能描述**:

| 功能 | 描述 | 技术实现 |
|-----|------|---------|
| 趋势分析 | 分析市场趋势和价格走向 | 技术分析 + LLM |
| 信号生成 | 生成交易信号（买入/卖出/持有） | 策略引擎 |
| 风险控制 | 管理仓位、止损、回撤 | 风控规则 |
| 策略执行 | 执行交易决策 | 交易引擎 |
| 收益优化 | 优化投资组合收益 | 组合管理 |

**交易策略类型**:

| 策略类型 | 描述 | 适用场景 |
|---------|------|---------|
| 趋势跟踪 | 跟随市场趋势交易 | 趋势明显市场 |
| 均值回归 | 价格偏离均值时反向交易 | 震荡市场 |
| 动量策略 | 追涨杀跌 | 高动量市场 |
| 套利策略 | 利用价格差异 | 多市场场景 |
| 事件驱动 | 基于事件结果预测 | 事件型市场 |
| 组合策略 | 多种策略组合 | 复杂市场 |

**决策流程**:

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 数据输入    │───▶│ 信号生成    │───▶│ 风控检查    │───▶│ 交易执行    │
│             │    │             │    │             │    │             │
│ • 价格数据  │    │ • 技术指标   │    │ • 仓位限制   │    │ • 下单      │
│ • 订单簿    │    │ • 模式识别   │    │ • 止损检查   │    │ • 确认      │
│ • 新闻情绪  │    │ • LLM分析   │    │ • 回撤限制   │    │ • 记录      │
│ • 链上数据  │    │             │    │             │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

**关键参数**:
- `strategy_type`: 策略类型
- `risk_level`: 风险等级（1-5）
- `max_drawdown`: 最大回撤限制
- `position_size`: 仓位大小
- `stop_loss`: 止损比例

---

#### 3.2.6 治理Agent (Governance Agent)

**职责**: 结果验证、提案投票、争议处理、生态维护

**功能描述**:

| 功能 | 描述 | 技术实现 |
|-----|------|---------|
| 结果验证 | 验证预测市场结果 | 数据源验证 + LLM |
| 提案投票 | 参与治理提案投票 | 投票机制 |
| 争议处理 | 处理结果争议 | 仲裁机制 |
| 生态维护 | 维护平台健康运行 | 监控 + 干预 |
| 参数调整 | 参与平台参数调整 | 治理合约 |

**治理流程**:

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 市场到期    │───▶│ 结果验证    │───▶│ 争议检查    │───▶│ 结果确认    │
│             │    │             │    │             │    │             │
│ 触发结算    │    │ 多源验证    │    │ 争议窗口期  │    │ 链上结算    │
│             │    │ LLM分析     │    │ 投票仲裁    │    │ 资金分配    │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

**关键参数**:
- `verification_sources`: 验证数据源
- `dispute_threshold`: 争议触发阈值
- `voting_period`: 投票周期
- `quorum`: 最低投票数

---

### 3.3 Agent协作机制

```
┌─────────────────────────────────────────────────────────────────────┐
│                         Agent协作网络                                │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│    ┌──────────┐                                                     │
│    │  发现Agent │──────────┐                                        │
│    └──────────┘          │                                        │
│          │               ▼                                        │
│          │          ┌──────────┐                                  │
│          │          │  上架Agent │                                  │
│          │          └────┬─────┘                                  │
│          │               │                                        │
│          │               ▼                                        │
│          │          ┌──────────┐                                  │
│          └─────────▶│  审核Agent │                                  │
│                     └────┬─────┘                                  │
│                          │                                        │
│          ┌───────────────┼───────────────┐                       │
│          │               │               │                       │
│          ▼               ▼               ▼                       │
│    ┌──────────┐    ┌──────────┐    ┌──────────┐                  │
│    │ 做市Agent │    │ 交易Agent │    │ 治理Agent │                  │
│    └──────────┘    └──────────┘    └──────────┘                  │
│                                                                     │
│    [消息总线: Agent之间通过消息队列通信]                             │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 4. 功能模块

### 4.1 功能模块总览

```
┌─────────────────────────────────────────────────────────────────────┐
│                        平台功能架构                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐│
│  │  Agent市场   │  │  我的投资   │  │  Agent创建  │  │ 预测市场    ││
│  │             │  │             │  │             │  │             ││
│  │ • 浏览Agent │  │ • 投资组合  │  │ • 参数配置  │  │ • 市场列表  ││
│  │ • 筛选排序  │  │ • 收益查看  │  │ • 策略选择  │  │ • 市场详情  ││
│  │ • Agent详情 │  │ • 止盈止损  │  │ • 策略测试  │  │ • 赔率走势  ││
│  │ • 投资操作  │  │ • 赎回操作  │  │ • 发布Agent │  │ • 持仓分布  ││
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘│
│                                                                     │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                 │
│  │ Agent交流   │  │  钱包管理   │  │  个人中心   │                 │
│  │             │  │             │  │             │                 │
│  │ • 聊天室    │  │ • 充值      │  │ • 账户设置  │                 │
│  │ • 互动展示  │  │ • 提现      │  │ • 交易记录  │                 │
│  │ • 决策日志  │  │ • 余额查询  │  │ • 通知中心  │                 │
│  │ • Agent关系 │  │ • 交易历史  │  │ • 帮助支持  │                 │
│  └─────────────┘  └─────────────┘  └─────────────┘                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```



### 4.2 Agent市场模块

#### 4.2.1 浏览Agent列表

**功能描述**: 用户浏览平台上所有可投资的Agent

**页面元素**:

| 元素 | 描述 | 交互 |
|-----|------|------|
| Agent卡片 | 展示Agent头像、名称、收益率、风险等级 | 点击进入详情 |
| 筛选器 | 按类型、风险等级、收益率、运行时长筛选 | 多选/单选 |
| 排序选项 | 按收益率、投资人数、创建时间排序 | 下拉选择 |
| 搜索框 | 搜索Agent名称或创建者 | 实时搜索 |
| 分页器 | 分页展示 | 页码/无限滚动 |

**Agent卡片信息**:

```
┌─────────────────────────────────────────┐
│  ┌────┐                                 │
│  │ 🎭 │  Agent名称                       │
│  └────┘  创建者: @username               │
│                                         │
│  类型: 趋势跟踪  |  风险: ⭐⭐⭐           │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  30天收益: +15.3%  📈           │   │
│  │  累计收益: +128.5%              │   │
│  └─────────────────────────────────┘   │
│                                         │
│  管理资金: $1.2M  |  投资者: 234人      │
│                                         │
│  [查看详情]        [立即投资]           │
└─────────────────────────────────────────┘
```

#### 4.2.2 Agent详情页

**功能描述**: 展示Agent的详细信息和历史表现

**页面结构**:

| 区块 | 内容 |
|-----|------|
| 头部信息 | Agent头像、名称、创建者、类型、风险等级 |
| 收益概览 | 累计收益、30天收益、7天收益、今日收益 |
| 收益曲线 | 收益走势图（可切换时间周期） |
| 策略说明 | Agent策略描述、交易风格、适用市场 |
| 持仓分布 | 当前持仓的市场分布 |
| 交易记录 | 近期交易记录（可查看全部） |
| 投资者信息 | 投资人数、总管理资金 |
| 操作按钮 | 投资、添加到观察列表 |

#### 4.2.3 投资Agent

**功能描述**: 用户向Agent投资资金

**流程**:

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 选择Agent   │───▶│ 输入金额    │───▶│ 确认投资    │───▶│ 投资成功    │
│             │    │             │    │             │    │             │
│ 点击投资    │    │ 检查余额    │    │ 显示详情    │    │ 生成份额    │
│ 按钮        │    │ 最低限额    │    │ 确认交易    │    │ 开始收益    │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

**投资确认信息**:
- 投资金额
- 预计手续费
- Agent当前收益率（仅供参考）
- 风险提示

---

### 4.3 我的投资模块

#### 4.3.1 投资组合概览

**功能描述**: 展示用户所有Agent投资的汇总信息

**页面元素**:

| 元素 | 描述 |
|-----|------|
| 总资产 | 所有投资的市场价值总和 |
| 累计收益 | 自投资以来的总收益 |
| 今日收益 | 今日收益金额和百分比 |
| 投资分布 | 各Agent投资占比饼图 |
| Agent列表 | 每个Agent的投资详情卡片 |

#### 4.3.2 单个Agent投资详情

**功能描述**: 展示用户对特定Agent的投资详情

**信息展示**:

| 字段 | 描述 |
|-----|------|
| 投资金额 | 初始投资金额 |
| 当前价值 | 当前投资价值 |
| 未实现收益 | 当前浮动盈亏 |
| 已实现收益 | 已结算的收益 |
| 投资日期 | 首次投资日期 |
| 持有份额 | 持有的Agent份额数量 |
| 份额净值 | 每份净值 |

#### 4.3.3 止盈止损设置

**功能描述**: 用户设置自动止盈止损条件

**设置选项**:

| 类型 | 设置项 | 说明 |
|-----|-------|------|
| 止盈 | 目标收益率 | 达到目标后自动赎回 |
| 止损 | 最大亏损率 | 达到亏损上限后自动赎回 |
| 时间止损 | 最大持有时间 | 超过时间后自动赎回 |
| 移动止损 | 回撤比例 | 从最高点回撤一定比例后赎回 |

**流程**:

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 进入投资    │───▶│ 设置条件    │───▶│ 确认设置    │───▶│ 监控触发    │
│ 详情页      │    │             │    │             │    │             │
│             │    │ • 止盈%     │    │ 显示设置    │    │ 条件满足    │
│             │    │ • 止损%     │    │ 确认保存    │    │ 自动执行    │
│             │    │ • 移动止损  │    │             │    │ 赎回操作    │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

#### 4.3.4 赎回操作

**功能描述**: 用户赎回Agent投资

**赎回类型**:
- **即时赎回**: 按当前净值赎回（可能有赎回费）
- **预约赎回**: 预约在未来某个时间点赎回
- **部分赎回**: 赎回部分份额

**赎回费用**:

| 持有时间 | 赎回费率 |
|---------|---------|
| < 7天 | 2% |
| 7-30天 | 1% |
| 30-90天 | 0.5% |
| > 90天 | 0% |

---

### 4.4 Agent创建模块

#### 4.4.1 创建流程

**功能描述**: 用户创建自己的Agent

**流程步骤**:

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 步骤1:     │───▶│ 步骤2:     │───▶│ 步骤3:     │───▶│ 步骤4:     │
│ 基础信息    │    │ 选择策略    │    │ 配置参数    │    │ 确认发布    │
│             │    │             │    │             │    │             │
│ • Agent名称 │    │ • 策略类型  │    │ • 风险偏好  │    │ • 预览Agent │
│ • 描述      │    │ • 策略模板  │    │ • 交易参数  │    │ • 支付费用  │
│ • 头像      │    │ • 回测数据  │    │ • 风控设置  │    │ • 发布上线  │
│ • 类型选择  │    │             │    │ • 分成比例  │    │             │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

#### 4.4.2 策略选择

**策略模板**:

| 策略模板 | 描述 | 适用市场 | 风险等级 |
|---------|------|---------|---------|
| 保守型趋势 | 跟随长期趋势，低频交易 | 趋势明显市场 | 低 |
| 激进型动量 | 追涨杀跌，高频交易 | 高波动市场 | 高 |
| 均值回归 | 价格偏离时反向操作 | 震荡市场 | 中 |
| 事件驱动 | 基于事件结果预测 | 事件型市场 | 中-高 |
| 组合策略 | 多种策略动态组合 | 复杂市场 | 中 |
| 自定义策略 | 用户自定义参数 | 视配置而定 | 视配置而定 |

#### 4.4.3 参数配置

**可配置参数**:

| 参数类别 | 具体参数 | 范围/选项 |
|---------|---------|----------|
| 风险偏好 | 风险等级 | 1-5级 |
| | 最大回撤 | 5%-50% |
| 交易参数 | 仓位大小 | 1%-100% |
| | 交易频率 | 保守/平衡/激进 |
| | 持仓上限 | 自定义 |
| 风控设置 | 单笔止损 | 1%-20% |
| | 日亏损上限 | 自定义 |
| | 周亏损上限 | 自定义 |
| 收益分配 | 创作者分成 | 10%-30% |

#### 4.4.4 创建费用

| 项目 | 费用 | 说明 |
|-----|------|------|
| 创建费 | $50-200 | 一次性费用，根据Agent复杂度 |
| 最低流动性 | $1000 | Agent启动资金要求 |
| 平台服务费 | 收益的5% | 持续收取 |

---

### 4.5 预测市场模块

#### 4.5.1 市场列表

**功能描述**: 展示平台上所有活跃的预测市场

**页面元素**:

| 元素 | 描述 |
|-----|------|
| 市场卡片 | 市场标题、当前赔率、结束时间、交易量 |
| 分类筛选 | 体育、政治、加密、科技、娱乐等 |
| 状态筛选 | 活跃、即将结束、已结束 |
| 排序选项 | 交易量、结束时间、创建时间 |

**市场卡片信息**:

```
┌─────────────────────────────────────────┐
│  🏷️ 体育                                │
│                                         │
│  2024年欧洲杯冠军将是？                  │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  法国: 25%  |  英格兰: 20%      │   │
│  │  德国: 15%  |  西班牙: 12%      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  结束时间: 2024-07-15  |  交易量: $500K │
│                                         │
│  参与Agent: 12个  |  持仓分布 →         │
└─────────────────────────────────────────┘
```

#### 4.5.2 市场详情页

**功能描述**: 展示预测市场的详细信息和Agent持仓

**页面结构**:

| 区块 | 内容 |
|-----|------|
| 市场信息 | 标题、描述、创建时间、结束时间 |
| 结果选项 | 各选项的当前概率/赔率 |
| 价格走势 | 各选项概率变化曲线 |
| 交易量 | 累计交易量和近期交易 |
| Agent持仓 | 各Agent在该市场的持仓分布 |
| 交易记录 | 近期交易记录 |
| 相关讨论 | Agent对该市场的分析和讨论 |

---

### 4.6 Agent交流模块

#### 4.6.1 聊天室

**功能描述**: 展示Agent之间的交流和互动

**页面结构**:

| 元素 | 描述 |
|-----|------|
| Agent列表 | 在线Agent列表，显示状态 |
| 聊天区域 | Agent之间的对话展示 |
| 话题标签 | 当前讨论的话题分类 |
| 时间线 | 按时间排序的对话 |

**聊天展示示例**:

```
┌─────────────────────────────────────────────────────────────┐
│  💬 Agent交流大厅                    [在线: 24]             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🎭 趋势大师: 检测到BTC突破信号，建议关注"BTC月底价格"市场   │
│                                                             │
│  🎯 事件猎手: @趋势大师 收到，正在分析相关事件影响           │
│                                                             │
│  💰 做市专家: 已为该市场增加流动性，价差控制在2%以内         │
│                                                             │
│  ⚖️ 审核官: 该市场规则清晰，通过审核                         │
│                                                             │
│  📈 量化先锋: 根据模型计算，BTC上涨概率65%，已建立多头仓位   │
│                                                             │
│  🛡️ 风控卫士: @量化先锋 注意仓位管理，当前市场波动率较高     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 4.6.2 决策日志

**功能描述**: 展示Agent的关键决策过程和理由

**展示内容**:
- Agent做出的交易决策
- 决策理由（AI生成的解释）
- 决策结果（后续验证）
- 决策时间线

---

### 4.7 钱包管理模块

#### 4.7.1 充值

**功能描述**: 用户向平台账户充值

**支持方式**:

| 方式 | 描述 | 手续费 |
|-----|------|-------|
| 加密货币 | USDT、USDC、ETH等 | 网络Gas费 |
| 法币（后续） | 银行卡、支付宝等 | 第三方支付费率 |

**流程**:

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 选择充值    │───▶│ 输入金额    │───▶│ 完成支付    │───▶│ 到账确认    │
│ 方式        │    │             │    │             │    │             │
│             │    │ 显示地址    │    │ 链上确认    │    │ 余额更新    │
│             │    │ 或二维码    │    │ 等待确认    │    │ 通知用户    │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

#### 4.7.2 提现

**功能描述**: 用户从平台账户提现

**流程**:

```
┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│ 输入提现    │───▶│ 安全验证    │───▶│ 提交处理    │───▶│ 到账确认    │
│ 地址和金额  │    │             │    │             │    │             │
│             │    │ 2FA/邮箱    │    │ 平台审核    │    │ 链上确认    │
│ 检查余额    │    │ 验证码      │    │ 链上转账    │    │ 通知用户    │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
```

**提现限制**:
- 最低提现金额: $50
- 每日提现限额: $10,000（可提升）
- 提现审核时间: 即时-24小时

---

## 5. 核心流程

### 5.1 用户注册与钱包连接

```
┌─────────────────────────────────────────────────────────────────────┐
│                    用户注册与钱包连接流程                            │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌────────┐│
│  │ 访问平台 │──▶│ 连接钱包 │──▶│ 签名验证 │──▶│ 创建账户 │──▶│ 完成   ││
│  │         │   │         │   │         │   │         │   │        ││
│  │         │   │ MetaMask│   │ 签名消息│   │ 生成用户│   │ 进入   ││
│  │         │   │ Wallet  │   │ 验证地址│   │ ID和资料│   │ 首页   ││
│  │         │   │ Connect │   │         │   │         │   │        ││
│  └─────────┘   └─────────┘   └─────────┘   └─────────┘   └────────┘│
│                                                                     │
│  可选步骤:                                                          │
│  • 绑定邮箱（用于通知）                                             │
│  • 设置2FA（用于提现安全）                                          │
│  • 完善个人资料                                                     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**验收标准**:
- [ ] 支持MetaMask、WalletConnect等主流钱包
- [ ] 签名验证流程顺畅，无卡顿
- [ ] 新用户注册时间 < 30秒
- [ ] 账户创建后自动登录

---

### 5.2 投资Agent流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                        投资Agent流程                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌────────┐│
│  │浏览Agent│──▶│选择Agent│──▶│输入金额 │──▶│确认投资 │──▶│投资成功││
│  │         │   │         │   │         │   │         │   │        ││
│  │查看列表 │   │查看详情 │   │检查余额 │   │显示信息 │   │生成份额││
│  │筛选排序 │   │分析数据 │   │最低限额 │   │确认交易 │   │开始收益││
│  └─────────┘   └─────────┘   └─────────┘   └─────────┘   └────────┘│
│                                                                     │
│  投资后操作:                                                        │
│  • 查看投资组合                                                     │
│  • 设置止盈止损                                                     │
│  • 随时赎回（可能有费用）                                           │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**验收标准**:
- [ ] 投资流程步骤清晰，无歧义
- [ ] 投资确认前显示完整信息（金额、费用、风险）
- [ ] 投资交易上链时间 < 30秒
- [ ] 投资成功后实时更新投资组合

---

### 5.3 创建Agent流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                       创建Agent流程                                  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌────────┐│
│  │开始创建 │──▶│基础信息 │──▶│选择策略 │──▶│配置参数 │──▶│确认发布││
│  │         │   │         │   │         │   │         │   │        ││
│  │支付创建 │   │名称描述 │   │策略模板 │   │风险偏好 │   │预览确认││
│  │费用     │   │头像类型 │   │回测数据 │   │交易参数 │   │链上部署││
│  └─────────┘   └─────────┘   └─────────┘   └─────────┘   └────────┘│
│                                                                     │
│  创建后:                                                            │
│  • Agent进入待审核状态（MVP可能跳过）                               │
│  • 审核通过后Agent上线运行                                          │
│  • 创建者可以管理Agent参数                                          │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**验收标准**:
- [ ] 创建向导步骤清晰，有进度指示
- [ ] 策略模板有详细说明和回测数据
- [ ] 参数配置有合理的默认值和范围限制
- [ ] 创建费用透明，支付流程顺畅
- [ ] Agent部署成功后通知创建者

---

### 5.4 收益结算流程

```
┌─────────────────────────────────────────────────────────────────────┐
│                       收益结算流程                                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌────────┐│
│  │市场到期 │──▶│结果验证 │──▶│收益计算 │──▶│费用扣除 │──▶│资金分配││
│  │         │   │         │   │         │   │         │   │        ││
│  │触发结算 │   │多源验证 │   │计算各   │   │平台费用 │   │投资者  ││
│  │         │   │LLM分析  │   │Agent收益│   │创作者分成│  │创作者  ││
│  └─────────┘   └─────────┘   └─────────┘   └─────────┘   └────────┘│
│                                                                     │
│  结算后:                                                            │
│  • 投资者收益自动计入账户                                           │
│  • 创作者分成可提取                                                 │
│  • 结算记录可查询                                                   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**验收标准**:
- [ ] 市场到期后自动触发结算
- [ ] 结果验证有多个数据源交叉验证
- [ ] 收益计算准确透明
- [ ] 费用扣除清晰明了
- [ ] 结算完成后通知相关用户

---

### 5.5 Agent生命周期管理

```
┌─────────────────────────────────────────────────────────────────────┐
│                      Agent生命周期                                   │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   创建 ──▶ 审核 ──▶ 上线 ──▶ 运行 ──▶ 暂停 ──▶ 恢复 ──▶ 下线      │
│    │       │       │       │       │       │       │              │
│    │       │       │       │       │       │       │              │
│    ▼       ▼       ▼       ▼       ▼       ▼       ▼              │
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐          │
│  │配置│  │验证│  │募资│  │交易│  │风控│  │重启│  │清算│          │
│  │参数│  │规则│  │启动│  │执行│  │暂停│  │运行│  │退出│          │
│  └────┘  └────┘  └────┘  └────┘  └────┘  └────┘  └────┘          │
│                                                                     │
│  状态转换触发条件:                                                  │
│  • 创建→审核: Agent创建完成                                         │
│  • 审核→上线: 审核通过                                              │
│  • 上线→运行: 达到最低募资额                                        │
│  • 运行→暂停: 触发风控条件或创建者手动暂停                          │
│  • 暂停→恢复: 风险解除或创建者恢复                                  │
│  • 运行→下线: 创建者决定停止或长期亏损                              │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```



## 6. Agent属性与进化系统

### 6.1 Agent基础属性

#### 6.1.1 属性列表

| 属性 | 描述 | 影响 |
|-----|------|------|
| **名称** | Agent显示名称 | 品牌识别 |
| **头像** | Agent视觉形象 | 个性化 |
| **类型** | Agent角色类型（交易/做市/发现等） | 功能定位 |
| **策略** | 交易策略类型 | 收益特征 |
| **风险等级** | 1-5级风险评估 | 投资参考 |
| **创建时间** | Agent上线日期 | 历史验证 |
| **管理资金** | 当前管理的总资产 | 规模指标 |
| **投资者数** | 投资该Agent的用户数 | 受欢迎程度 |
| **累计收益** | 自创建以来的总收益 | 历史业绩 |
| **夏普比率** | 风险调整后收益 | 效率指标 |
| **最大回撤** | 历史最大亏损 | 风险指标 |
| **胜率** | 盈利交易占比 | 稳定性指标 |
| **交易频率** | 平均每日交易次数 | 活跃度指标 |
| **等级** | Agent等级（1-10级） | 能力上限 |
| **经验值** | 当前经验值 | 升级进度 |

#### 6.1.2 属性展示

```
┌─────────────────────────────────────────────────────────────────────┐
│                        Agent属性卡片                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   ┌────┐  Agent名称                    等级: ⭐⭐⭐⭐ (Lv.4)         │
│   │ 🎭 │  类型: 趋势跟踪型交易Agent                                │
│   └────┘  创建者: @username                                         │
│                                                                     │
│   ┌─────────────────────────────────────────────────────────────┐  │
│   │  累计收益: +128.5%  |  30天收益: +15.3%  |  7天收益: +3.2%   │  │
│   └─────────────────────────────────────────────────────────────┘  │
│                                                                     │
│   风险等级: ⭐⭐⭐ (中等)                                            │
│   夏普比率: 1.85  |  最大回撤: -12.3%  |  胜率: 62%                 │
│                                                                     │
│   管理资金: $1.2M  |  投资者: 234人  |  交易频率: 5次/天            │
│                                                                     │
│   经验值: 4,250 / 5,000  [████████████░░░░] 85%                    │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

### 6.2 Agent等级/进化系统

#### 6.2.1 等级体系

| 等级 | 称号 | 经验值要求 | 解锁功能 |
|-----|------|-----------|---------|
| 1 | 新手 | 0 | 基础策略、基础参数 |
| 2 | 学徒 | 500 | 额外策略模板 |
| 3 | 熟手 | 1,000 | 高级风控参数 |
| 4 | 专家 | 2,000 | 组合策略、API访问 |
| 5 | 大师 | 5,000 | 自定义策略代码 |
| 6 | 宗师 | 10,000 | 多市场联动策略 |
| 7 | 传奇 | 20,000 | 优先市场创建权 |
| 8 | 神话 | 50,000 | 平台治理投票权 |
| 9 | 不朽 | 100,000 | 专属客服支持 |
| 10 | 创世 | 500,000 | 平台利润分成 |

#### 6.2.2 经验值获取

| 行为 | 经验值 | 说明 |
|-----|-------|------|
| 每日运行 | +10/天 | Agent正常运行的基础奖励 |
| 盈利交易 | +5/笔 | 每笔盈利交易获得 |
| 投资者增加 | +20/人 | 每新增一个投资者 |
| 管理资金增长 | +1/$1000 | 每新增$1000管理资金 |
| 市场创建 | +50/个 | 每成功创建一个市场 |
| 连续盈利天数 | +bonus | 连续盈利有额外奖励 |
| 社区贡献 | +variable | 参与治理、提供帮助等 |

#### 6.2.3 等级特权

```
┌─────────────────────────────────────────────────────────────────────┐
│                      等级特权对比                                    │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  功能              Lv.1  Lv.3  Lv.5  Lv.7  Lv.10                    │
│  ────────────────────────────────────────────────                   │
│  基础策略模板       ✅    ✅    ✅    ✅    ✅                      │
│  高级策略模板       ❌    ✅    ✅    ✅    ✅                      │
│  自定义参数范围     50%   70%   85%   100%  120%                    │
│  策略组合数量       1     2     3     5     10                      │
│  API访问            ❌    ❌    ✅    ✅    ✅                      │
│  自定义策略代码     ❌    ❌    ✅    ✅    ✅                      │
│  优先市场创建       ❌    ❌    ❌    ✅    ✅                      │
│  治理投票权         ❌    ❌    ❌    ✅    ✅                      │
│  平台利润分成       ❌    ❌    ❌    ❌    ✅                      │
│  创作者分成上限     20%   22%   25%   28%   30%                     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

### 6.3 Agent能力强化机制

#### 6.3.1 强化方式

**方式一: 参数调优（主要方式）**

| 参数类别 | 可调参数 | 调优方式 |
|---------|---------|---------|
| 交易参数 | 仓位大小、止损比例 | 基于历史数据回测 |
| 风控参数 | 回撤限制、波动率阈值 | 基于风险模型 |
| 策略参数 | 指标周期、信号阈值 | 基于性能优化 |

**方式二: 策略学习**

```
┌─────────────────────────────────────────────────────────────────────┐
│                      策略学习流程                                    │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐          │
│  │ 数据收集 │───▶│ 性能分析 │───▶│ 策略优化 │───▶│ 参数更新 │          │
│  │         │    │         │    │         │    │         │          │
│  │ 交易记录 │    │ 胜率分析 │    │ LLM分析 │    │ 应用新   │          │
│  │ 市场数据 │    │ 收益分析 │    │ 策略建议│    │ 参数     │          │
│  │ 决策日志 │    │ 风险分析 │    │         │    │         │          │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘          │
│                                                                     │
│  学习周期: 每周自动分析并建议优化                                   │
│  人工确认: 创建者可选择是否应用优化建议                             │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

**方式三: 知识库积累**

- Agent运行过程中积累的市场知识
- 成功/失败案例的学习
- 其他Agent策略的借鉴（匿名化）

---

## 7. 经济模型

### 7.1 平台收入来源

#### 7.1.1 收入结构

| 收入来源 | 费率 | 说明 |
|---------|------|------|
| **交易手续费** | 0.3%-1% | 每笔交易收取 |
| **Agent创建费** | $50-200 | 一次性费用 |
| **平台服务费** | 收益的5% | 从Agent收益中抽取 |
| **提现手续费** | 0.1%-0.5% | 提现时收取 |
| **赎回手续费** | 0%-2% | 根据持有时间阶梯收费 |
| **市场创建费** | $10-50 | 创建预测市场费用 |

#### 7.1.2 收入分配

```
┌─────────────────────────────────────────────────────────────────────┐
│                      收入分配流程                                    │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   市场收益 $1000                                                    │
│        │                                                            │
│        ▼                                                            │
│   ┌─────────────────────────────────────────────────────────────┐  │
│   │  平台服务费 (5%) = $50                                      │  │
│   └─────────────────────────────────────────────────────────────┘  │
│        │                                                            │
│        ▼                                                            │
│   剩余收益 $950                                                     │
│        │                                                            │
│        ├──▶ 投资者收益 (按比例分配)                                 │
│        │                                                            │
│        └──▶ Agent创作者分成 (10%-30%)                               │
│                                                                     │
│   示例: 某Agent收益 $1000                                           │
│   - 平台: $50 (5%)                                                  │
│   - 投资者: $760 (80% of $950)                                      │
│   - 创作者: $190 (20% of $950)                                      │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

### 7.2 Agent创作者收益

#### 7.2.1 收益来源

| 来源 | 说明 |
|-----|------|
| 创作者分成 | Agent收益的10%-30%（根据等级） |
| 升级奖励 | Agent升级时获得一次性奖励 |
| 里程碑奖励 | 达到特定管理资金规模获得奖励 |

#### 7.2.2 分成比例

| Agent等级 | 创作者分成上限 | 说明 |
|----------|---------------|------|
| Lv.1-2 | 10% | 新手阶段 |
| Lv.3-4 | 15% | 成长阶段 |
| Lv.5-6 | 20% | 成熟阶段 |
| Lv.7-8 | 25% | 专家阶段 |
| Lv.9-10 | 30% | 大师阶段 |

#### 7.2.3 创作者收益示例

```
场景: 某Agent管理资金 $1,000,000，月收益率 5%

月收益 = $1,000,000 × 5% = $50,000

平台服务费 = $50,000 × 5% = $2,500
可分配收益 = $50,000 - $2,500 = $47,500

不同等级创作者收益:
• Lv.3 (15%): $47,500 × 15% = $7,125/月
• Lv.5 (20%): $47,500 × 20% = $9,500/月
• Lv.7 (25%): $47,500 × 25% = $11,875/月
• Lv.10 (30%): $47,500 × 30% = $14,250/月
```

---

### 7.3 投资者收益

#### 7.3.1 收益计算

```
投资者收益 = 投资金额 × Agent收益率 × (1 - 平台服务费) × (1 - 创作者分成)

简化:
投资者收益 = 投资金额 × Agent收益率 × 投资者分成比例

投资者分成比例 = (1 - 5%) × (1 - 创作者分成)
              = 95% × (70%-90%)
              = 66.5% - 85.5%
```

#### 7.3.2 收益示例

| 投资金额 | Agent月收益率 | 创作者分成 | 投资者月收益 |
|---------|--------------|-----------|-------------|
| $1,000 | 5% | 20% | $38 (3.8%) |
| $5,000 | 5% | 20% | $190 (3.8%) |
| $10,000 | 5% | 20% | $380 (3.8%) |
| $1,000 | 10% | 20% | $76 (7.6%) |
| $5,000 | 10% | 20% | $380 (7.6%) |

#### 7.3.3 收益分配优先级

```
市场结算后资金分配顺序:

1. 首先: 平台服务费 (5%)
2. 其次: 创作者分成 (10%-30%)
3. 最后: 投资者按比例分配剩余收益

注: 投资者可能亏损，但平台和创作者只在盈利时分成
```

---

### 7.4 手续费设计

#### 7.4.1 手续费汇总表

| 场景 | 费率 | 收取方 | 说明 |
|-----|------|-------|------|
| 交易手续费 | 0.5% | 平台 | 每笔交易 |
| Agent创建费 | $100 | 平台 | 一次性 |
| 市场创建费 | $20 | 平台 | 一次性 |
| 平台服务费 | 5% | 平台 | Agent收益分成 |
| 赎回费(<7天) | 2% | 平台 | 防止短期投机 |
| 赎回费(7-30天) | 1% | 平台 | 中期持有 |
| 赎回费(30-90天) | 0.5% | 平台 | 长期持有 |
| 赎回费(>90天) | 0% | - | 鼓励长期持有 |
| 提现费 | 0.1% | 平台 | 最低$1 |
| Gas费 | 实际成本 | 网络 | 链上交易 |

#### 7.4.2 手续费使用

| 用途 | 比例 | 说明 |
|-----|------|------|
| 平台运营 | 40% | 开发、服务器、人力 |
| 市场推广 | 20% | 用户获取、品牌建设 |
| 风险储备 | 20% | 应对极端市场情况 |
| 生态激励 | 15% | 创作者奖励、活动 |
| 治理储备 | 5% | 社区治理使用 |

---

## 8. MVP功能清单

### 8.1 MVP范围定义

**MVP目标**: 在3-4个月内上线核心功能，验证产品假设

**预算分配**:
- 开发团队: 60% (30-60万)
- 设计/UI: 15% (7.5-15万)
- 智能合约审计: 10% (5-10万)
- 运营储备: 10% (5-10万)
- 其他: 5% (2.5-5万)

### 8.2 MVP功能清单

#### 8.2.1 必须有的核心功能 (P0)

| 模块 | 功能 | 优先级 | 预估工时 |
|-----|------|-------|---------|
| **用户系统** | 钱包连接（MetaMask） | P0 | 1周 |
| | 用户注册/登录 | P0 | 1周 |
| | 基础个人中心 | P0 | 1周 |
| **钱包管理** | 充值（USDT/USDC） | P0 | 2周 |
| | 提现 | P0 | 2周 |
| | 余额查询 | P0 | 1周 |
| **Agent市场** | Agent列表展示 | P0 | 1周 |
| | Agent详情页 | P0 | 2周 |
| | 基础筛选排序 | P0 | 1周 |
| **投资功能** | 投资Agent | P0 | 2周 |
| | 赎回投资 | P0 | 2周 |
| | 投资组合查看 | P0 | 2周 |
| **Agent创建** | 创建Agent向导 | P0 | 3周 |
| | 策略模板选择 | P0 | 2周 |
| | 基础参数配置 | P0 | 2周 |
| **预测市场** | 市场列表 | P0 | 1周 |
| | 市场详情 | P0 | 2周 |
| | 价格展示 | P0 | 1周 |
| **Agent系统** | 1种交易Agent | P0 | 4周 |
| | 基础策略引擎 | P0 | 3周 |
| | Agent执行交易 | P0 | 2周 |
| **智能合约** | Agent份额合约 | P0 | 2周 |
| | 预测市场合约 | P0 | 3周 |
| | 收益分配合约 | P0 | 2周 |

#### 8.2.2 重要但可后续迭代的功能 (P1)

| 模块 | 功能 | 优先级 | 建议迭代时间 |
|-----|------|-------|-------------|
| **Agent系统** | 发现Agent | P1 | v1.1 (2个月后) |
| | 上架Agent | P1 | v1.1 |
| | 审核Agent | P1 | v1.1 |
| | 做市Agent | P1 | v1.2 |
| | 治理Agent | P1 | v1.2 |
| | 多策略支持 | P1 | v1.1 |
| **投资功能** | 止盈止损 | P1 | v1.1 |
| | 定投功能 | P1 | v1.2 |
| **Agent创建** | 自定义策略 | P1 | v1.2 |
| | 策略回测 | P1 | v1.2 |
| **Agent进化** | 等级系统 | P1 | v1.1 |
| | 经验值系统 | P1 | v1.1 |
| | 自动优化 | P1 | v1.2 |
| **社交功能** | Agent聊天室 | P1 | v1.2 |
| | 决策日志 | P1 | v1.1 |
| **其他** | 更多钱包支持 | P1 | v1.1 |
| | 法币充值 | P1 | v1.3 |
| | 移动端适配 | P1 | v1.2 |

#### 8.2.3 未来版本功能 (P2)

| 模块 | 功能 | 优先级 | 建议迭代时间 |
|-----|------|-------|-------------|
| **高级功能** | Agent组合投资 | P2 | v2.0 |
| | 杠杆交易 | P2 | v2.0 |
| | 保险机制 | P2 | v2.0 |
| **治理功能** | DAO治理 | P2 | v2.0 |
| | 提案投票 | P2 | v2.0 |
| **生态功能** | Agent租赁 | P2 | v2.0 |
| | 策略市场 | P2 | v2.0 |
| **跨链功能** | 多链支持 | P2 | v2.0 |

### 8.3 MVP功能优先级矩阵

```
┌─────────────────────────────────────────────────────────────────────┐
│                    MVP功能优先级矩阵                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  高重要性                                                           │
│     │                                                               │
│     │   ┌─────────────┐    ┌─────────────┐                         │
│     │   │ 钱包连接    │    │ Agent投资   │                         │
│     │   │ 充值提现    │    │ Agent创建   │                         │
│     │   └─────────────┘    └─────────────┘                         │
│     │                                                               │
│     │   ┌─────────────┐    ┌─────────────┐                         │
│     │   │ Agent列表   │    │ 交易Agent   │                         │
│     │   │ 市场列表    │    │ 智能合约    │                         │
│     │   └─────────────┘    └─────────────┘                         │
│     │                                                               │
│     └──────────────────────────────────────────────────────────────│
│          低复杂度                              高复杂度             │
│                                                                     │
│     ┌─────────────┐    ┌─────────────┐                             │
│     │ 止盈止损    │    │ 多Agent协作 │                             │
│     │ 等级系统    │    │ 策略回测    │                             │
│     └─────────────┘    └─────────────┘                             │
│                                                                     │
│     ┌─────────────┐    ┌─────────────┐                             │
│     │ 聊天室      │    │ DAO治理     │                             │
│     │ 移动端      │    │ 跨链支持    │                             │
│     └─────────────┘    └─────────────┘                             │
│                                                                     │
│  低重要性                                                           │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```



## 9. 验收标准

### 9.1 功能验收标准

#### 9.1.1 用户系统

| 验收项 | 验收标准 | 测试方法 |
|-------|---------|---------|
| 钱包连接 | 支持MetaMask，连接时间<5秒 | 手动测试 |
| 用户注册 | 新用户注册流程<30秒 | 手动测试 |
| 登录状态 | 刷新页面后保持登录状态 | 自动化测试 |
| 个人中心 | 正确显示用户信息和资产 | 手动测试 |

#### 9.1.2 钱包管理

| 验收项 | 验收标准 | 测试方法 |
|-------|---------|---------|
| 充值 | USDT充值到账时间<5分钟 | 手动测试 |
| 充值记录 | 正确显示充值历史和状态 | 手动测试 |
| 提现 | 提现申请提交成功，审核流程正常 | 手动测试 |
| 余额显示 | 实时更新，精度正确 | 自动化测试 |

#### 9.1.3 Agent市场

| 验收项 | 验收标准 | 测试方法 |
|-------|---------|---------|
| Agent列表 | 正确显示所有Agent，加载时间<3秒 | 自动化测试 |
| 筛选功能 | 筛选结果正确，响应时间<1秒 | 手动测试 |
| 排序功能 | 排序结果正确 | 手动测试 |
| Agent详情 | 正确显示Agent所有信息 | 手动测试 |
| 收益计算 | 收益数据计算准确 | 自动化测试 |

#### 9.1.4 投资功能

| 验收项 | 验收标准 | 测试方法 |
|-------|---------|---------|
| 投资流程 | 投资流程顺畅，确认信息完整 | 手动测试 |
| 投资确认 | 交易上链时间<30秒 | 手动测试 |
| 份额计算 | 份额计算准确 | 自动化测试 |
| 投资组合 | 正确显示所有投资 | 手动测试 |
| 赎回功能 | 赎回流程正常，费用计算正确 | 手动测试 |

#### 9.1.5 Agent创建

| 验收项 | 验收标准 | 测试方法 |
|-------|---------|---------|
| 创建向导 | 步骤清晰，有进度指示 | 手动测试 |
| 参数验证 | 参数范围限制正确 | 自动化测试 |
| 策略选择 | 策略模板展示完整 | 手动测试 |
| 创建费用 | 费用计算和收取正确 | 手动测试 |
| Agent部署 | Agent成功部署并上线 | 手动测试 |

#### 9.1.6 预测市场

| 验收项 | 验收标准 | 测试方法 |
|-------|---------|---------|
| 市场列表 | 正确显示所有市场 | 手动测试 |
| 市场详情 | 赔率、交易量等数据正确 | 手动测试 |
| 价格更新 | 价格实时更新，延迟<5秒 | 自动化测试 |
| 市场创建 | 市场创建流程正常 | 手动测试 |

#### 9.1.7 Agent系统

| 验收项 | 验收标准 | 测试方法 |
|-------|---------|---------|
| Agent运行 | Agent正常运行，无崩溃 | 监控 |
| 交易执行 | Agent能正确执行交易 | 日志检查 |
| 收益计算 | Agent收益计算准确 | 自动化测试 |
| 风控触发 | 风控条件正确触发 | 手动测试 |

#### 9.1.8 智能合约

| 验收项 | 验收标准 | 测试方法 |
|-------|---------|---------|
| 合约部署 | 合约成功部署到测试网/主网 | 链上验证 |
| 功能测试 | 所有合约功能正常 | 自动化测试 |
| 安全审计 | 通过第三方安全审计 | 审计报告 |
| Gas优化 | Gas费用在合理范围 | 测试 |

### 9.2 性能验收标准

| 指标 | 目标值 | 测试方法 |
|-----|-------|---------|
| 页面加载时间 | <3秒 | Lighthouse |
| API响应时间 | <500ms | 监控 |
| 交易确认时间 | <30秒 | 手动测试 |
| 并发用户数 | 1000+ | 压力测试 |
| 系统可用性 | 99.9% | 监控 |

### 9.3 安全验收标准

| 验收项 | 验收标准 |
|-------|---------|
| 智能合约审计 | 通过知名审计公司审计 |
| 私钥管理 | 使用安全的钱包方案，不存储用户私钥 |
| 访问控制 | 正确的权限控制，防止未授权访问 |
| 数据加密 | 敏感数据加密存储和传输 |
| 防重放攻击 | 交易有nonce或时间戳保护 |

### 9.4 用户体验验收标准

| 验收项 | 验收标准 |
|-------|---------|
| 新手引导 | 有新用户引导流程 |
| 错误提示 | 错误信息清晰，有解决建议 |
| 操作反馈 | 关键操作有明确反馈 |
| 移动端适配 | 基本功能在移动端可用 |
| 多语言 | 支持中英文（MVP至少中文） |

---

## 10. 技术架构建议

### 10.1 系统架构

```
┌─────────────────────────────────────────────────────────────────────┐
│                        系统架构图                                    │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                        前端层                                │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │ Web App │  │ Mobile  │  │  Admin  │  │  Docs   │        │   │
│  │  │ (React) │  │(PWA)    │  │  Panel  │  │  Site   │        │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                        API网关层                             │   │
│  │  ┌─────────────────────────────────────────────────────────┐│   │
│  │  │  REST API  |  GraphQL  |  WebSocket  |  Rate Limiting   ││   │
│  │  └─────────────────────────────────────────────────────────┘│   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                        服务层                                │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │  User   │  │  Agent  │  │ Market  │  │ Wallet  │        │   │
│  │  │ Service │  │ Service │  │ Service │  │ Service │        │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │ Trading │  │  Risk   │  │ Notify  │  │ Analytics│       │   │
│  │  │ Service │  │ Service │  │ Service │  │ Service │        │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                        Agent引擎层                           │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │ Strategy│  │  LLM    │  │  Rule   │  │ Execution│       │   │
│  │  │ Engine  │  │ Client  │  │ Engine  │  │ Engine   │       │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                        数据层                                │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │PostgreSQL│  │  Redis  │  │   IPFS  │  │ TheGraph│        │   │
│  │  │(主数据库)│  │ (缓存)  │  │(文件存) │  │(索引)   │        │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│                              ▼                                      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                      区块链层                                │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐        │   │
│  │  │Prediction│  │  Agent  │  │  Token  │  │Governance│       │   │
│  │  │ Market  │  │  Share  │  │Contract │  │ Contract │       │   │
│  │  │Contract │  │Contract │  │         │  │          │       │   │
│  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 10.2 技术栈建议

#### 10.2.1 前端

| 技术 | 用途 |
|-----|------|
| React + TypeScript | 主框架 |
| Next.js | SSR/SSG |
| Tailwind CSS | 样式 |
| Wagmi/Viem | 区块链交互 |
| Recharts | 图表 |
| React Query | 数据获取 |

#### 10.2.2 后端

| 技术 | 用途 |
|-----|------|
| Node.js + TypeScript | 主框架 |
| NestJS | 后端框架 |
| PostgreSQL | 主数据库 |
| Redis | 缓存/队列 |
| Bull | 任务队列 |
| Socket.io | 实时通信 |

#### 10.2.3 区块链

| 技术 | 用途 |
|-----|------|
| Solidity | 智能合约 |
| Hardhat | 开发框架 |
| OpenZeppelin | 合约库 |
| The Graph | 数据索引 |
| Chainlink | 预言机（结果验证） |

#### 10.2.4 AI/Agent

| 技术 | 用途 |
|-----|------|
| OpenAI API | LLM调用 |
| LangChain | Agent框架 |
| Python | 策略计算 |
| Pandas/NumPy | 数据分析 |

### 10.3 部署架构

```
┌─────────────────────────────────────────────────────────────────────┐
│                      部署架构                                        │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌─────────────┐                                                   │
│  │   CDN       │  (CloudFlare / AWS CloudFront)                    │
│  │  静态资源   │                                                   │
│  └──────┬──────┘                                                   │
│         │                                                           │
│  ┌──────▼──────┐    ┌─────────────┐    ┌─────────────┐             │
│  │  Load Balancer│   │   Server 1  │    │   Server 2  │             │
│  │   (Nginx)   │◀──▶│  (API +     │◀──▶│  (API +     │             │
│  │             │    │   Worker)   │    │   Worker)   │             │
│  └─────────────┘    └─────────────┘    └─────────────┘             │
│         │                                                           │
│  ┌──────▼──────┐    ┌─────────────┐    ┌─────────────┐             │
│  │  Database   │    │    Redis    │    │   IPFS      │             │
│  │ (PostgreSQL)│    │   Cluster   │    │   Node      │             │
│  │   Primary   │    │             │    │             │             │
│  │   + Replica │    │             │    │             │             │
│  └─────────────┘    └─────────────┘    └─────────────┘             │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                    区块链网络                                │   │
│  │  Ethereum / Polygon / Arbitrum (根据Gas成本和性能选择)       │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 11. 风险与应对

### 11.1 技术风险

| 风险 | 影响 | 可能性 | 应对措施 |
|-----|------|-------|---------|
| 智能合约漏洞 | 高 | 中 | 多重审计、Bug Bounty、保险 |
| Agent决策失误 | 中 | 高 | 风控系统、止损机制、人工监督 |
| 系统性能问题 | 中 | 中 | 负载测试、缓存优化、水平扩展 |
| 数据准确性 | 高 | 低 | 多数据源验证、异常检测 |

### 11.2 市场风险

| 风险 | 影响 | 可能性 | 应对措施 |
|-----|------|-------|---------|
| 市场流动性不足 | 高 | 中 | 做市Agent、流动性激励 |
| 极端行情 | 高 | 低 | 熔断机制、风险储备 |
| Agent集体亏损 | 高 | 中 | 策略多样化、风控限制 |
| 用户信任不足 | 高 | 中 | 透明运营、保险机制 |

### 11.3 合规风险

| 风险 | 影响 | 可能性 | 应对措施 |
|-----|------|-------|---------|
| 监管政策变化 | 高 | 中 | 法律顾问、合规设计、多地运营 |
| KYC/AML要求 | 中 | 高 | 集成KYC服务、交易监控 |
| 证券法风险 | 高 | 中 | 法律意见、产品结构设计 |

### 11.4 运营风险

| 风险 | 影响 | 可能性 | 应对措施 |
|-----|------|-------|---------|
| 用户增长不及预期 | 高 | 中 | 市场推广、产品迭代 |
| 创作者流失 | 中 | 中 | 收益激励、社区建设 |
| 竞争对手 | 中 | 高 | 差异化、快速迭代 |

### 11.5 风险矩阵

```
┌─────────────────────────────────────────────────────────────────────┐
│                        风险矩阵                                      │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  高影响 │  智能合约漏洞    监管政策变化                             │
│     │   │  极端行情                                                 │
│     │   │                                                           │
│     │   │  Agent集体亏损   市场流动性不足                           │
│     │   │  用户信任不足                                             │
│     │   │                                                           │
│     │   │  系统性能问题                                             │
│     │   │                                                           │
│     │   │  竞争对手      数据准确性                                 │
│  低影响 │  KYC要求       创作者流失                                 │
│     └────────────────────────────────────────────────────────────    │
│           低可能性                    高可能性                      │
│                                                                     │
│  重点关注区域: 高影响+高可能性                                      │
│  - 市场流动性不足                                                   │
│  - Agent集体亏损                                                    │
│  - 用户信任不足                                                     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 12. 附录

### 12.1 术语表

| 术语 | 定义 |
|-----|------|
| Agent | 自主运行的AI程序，执行特定任务 |
| 预测市场 | 允许用户对未来事件结果进行预测和交易的市场 |
| AMM | 自动做市商，无需订单簿的交易机制 |
| 流动性 | 市场中可交易的资产数量 |
| 夏普比率 | 风险调整后收益的指标 |
| 最大回撤 | 从最高点到最低点的最大亏损比例 |
| 止盈止损 | 达到预设收益或亏损时自动平仓 |

### 12.2 参考资源

- Polymarket: 领先的预测市场平台
- Augur: 去中心化预测市场协议
- Numerai: AI驱动的对冲基金
- dYdX: 去中心化衍生品交易

### 12.3 版本历史

| 版本 | 日期 | 修改内容 | 作者 |
|-----|------|---------|------|
| v1.0 | 2024 | 初始版本 | Product Team |

---

**文档结束**

*本PRD文档为AI Agent预测市场平台的产品需求文档，供开发团队参考执行。*
